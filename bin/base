#!/usr/bin/env node
'use strict'

process.title = 'base'

const program = require('commander')

program
  .version('0.0.1')
  .usage('[options] <nums ...>')
  .description('Converts numbers from base(x) to base(y)')
  .option('-l, --left-pad <n>', 'Fill in leading characters [0]', 0)
  .option('-f, --from <n>', 'The base to expect input from [10]', 10)
  .option('-t, --to <n>', 'The base to output to [16]', 16)
  .option('-v, --verbose', 'Display full information')
  .parse(process.argv)

if (!program.args.length) return program.help()

program.args.forEach((arg) => {
  let output = convert(arg, program.from, program.to, program.leftPad)
  if (program.verbose) {
    output = `${arg} (${program.from}) = ${output} (${program.to})`
  }
  console.log(output)
})

function convert(num, from, to, padLength) {
  return leftPad(parseInt(num, from).toString(to), '0', padLength)
}

function leftPad(str, char, maxLength) {
  char = char || ' '
  const fillLength = Math.max(maxLength - str.length, 0)
  const fill = char.charAt(0).repeat(fillLength)
  return `${fill}${str}`
}
