#!/usr/bin/env node
'use strict'

const path = require('path')
const pkg = require(path.resolve('package.json'))
const args = process.argv.slice(2)
const exact = args[0] === '-e' || args[0] === '--exact'

const DEP_TYPES = [
  {
    deps: pkg.dependencies,
    flag: '--save'
  },
  {
    deps: pkg.devDependencies,
    flag: '--save-dev'
  },
  {
    deps: pkg.optionalDependencies,
    flag: '--save-optional'
  }
]

const output = DEP_TYPES.map((depType) => {
  const deps = Object.keys(depType.deps || {}).map((dep) => `${dep}@latest`)
  let flags = depType.flag
  if (!deps.length) return null
  if (exact) flags += ' --save-exact'
  return `npm install ${flags} ${deps.join(' ')}`
}).filter(Boolean)

console.log(`\n${output.join(';\n\n')}\n`)
